<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    

    <!--Author-->
    
        <meta name="author" content="Melon">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="Melon"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="Melon"/>

    <!--Type page-->
    
        <meta property="og:type" content="website" />
    

    <!--Page Cover-->
    

    <meta name="twitter:card" content="summary" />
    

    <!-- Title -->
    
    <title>page - Melon</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/style.css">

    <!-- Google Analytics -->
    


</head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/about">
                    About
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
            <h1 id="main-title" class="title">Melon</h1>
        
    </div>
</header>

        <section class="main">
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2016/06/16/去除Spring-ResponseBody产生的大量Accept-Charset/">
                去除Spring @ResponseBody产生的大量Accept-Charset
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-06-16</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>Spring MVC使用@ResponseBody后会产生很大的响应头(Accept-Charset会达到4K+)，原因在于默认情况下StringHttpMessageConverter.writeInternal()会将所有可用字符集回写到response响应头中：</p>
<p><img src="http://7xvf5t.com1.z0.glb.clouddn.com/blog-spring-1.png" alt=""></p>
<p>去除这些信息我们可以这样,定义一个拦截器:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div></pre></td><td class="code"><pre><div class="line">package cn.krun.cup.pojo;</div><div class="line"></div><div class="line">import java.io.IOException;</div><div class="line">import java.io.InputStreamReader;</div><div class="line">import java.io.OutputStreamWriter;</div><div class="line">import java.io.UnsupportedEncodingException;</div><div class="line">import java.nio.charset.Charset;</div><div class="line">import java.util.ArrayList;</div><div class="line">import java.util.List;</div><div class="line"></div><div class="line">import org.springframework.http.HttpInputMessage;</div><div class="line">import org.springframework.http.HttpOutputMessage;</div><div class="line">import org.springframework.http.MediaType;</div><div class="line">import org.springframework.http.converter.AbstractHttpMessageConverter;</div><div class="line">import org.springframework.util.FileCopyUtils;</div><div class="line"></div><div class="line">public class UTF8StringHttpMessageConverter extends</div><div class="line">        AbstractHttpMessageConverter&lt;String&gt; &#123;</div><div class="line"></div><div class="line">    public static final Charset DEFAULT_CHARSET = Charset.forName(&quot;UTF-8&quot;);</div><div class="line"></div><div class="line">    private final List&lt;Charset&gt; availableCharsets;</div><div class="line"></div><div class="line">    private boolean writeAcceptCharset = true;</div><div class="line"></div><div class="line">    public UTF8StringHttpMessageConverter() &#123;</div><div class="line">        super(new MediaType(&quot;text&quot;, &quot;plain&quot;, DEFAULT_CHARSET), MediaType.ALL);</div><div class="line">        this.availableCharsets = new ArrayList&lt;Charset&gt;(Charset</div><div class="line">                .availableCharsets().values());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Indicates whether the &#123;@code Accept-Charset&#125; should be written to any</div><div class="line">     * outgoing request.</div><div class="line">     * &lt;p&gt;</div><div class="line">     * Default is &#123;@code true&#125;.</div><div class="line">     */</div><div class="line">    public void setWriteAcceptCharset(boolean writeAcceptCharset) &#123;</div><div class="line">        this.writeAcceptCharset = writeAcceptCharset;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public boolean supports(Class&lt;?&gt; clazz) &#123;</div><div class="line">        return String.class.equals(clazz);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @SuppressWarnings(&quot;rawtypes&quot;)</div><div class="line">    @Override</div><div class="line">    protected String readInternal(Class clazz, HttpInputMessage inputMessage)</div><div class="line">            throws IOException &#123;</div><div class="line">        Charset charset = getContentTypeCharset(inputMessage.getHeaders()</div><div class="line">                .getContentType());</div><div class="line">        return FileCopyUtils.copyToString(new InputStreamReader(inputMessage</div><div class="line">                .getBody(), charset));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected Long getContentLength(String s, MediaType contentType) &#123;</div><div class="line">        Charset charset = getContentTypeCharset(contentType);</div><div class="line">        try &#123;</div><div class="line">            return (long) s.getBytes(charset.name()).length;</div><div class="line">        &#125; catch (UnsupportedEncodingException ex) &#123;</div><div class="line">            // should not occur</div><div class="line">            throw new InternalError(ex.getMessage());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void writeInternal(String s, HttpOutputMessage outputMessage)</div><div class="line">            throws IOException &#123;</div><div class="line">        if (writeAcceptCharset) &#123;</div><div class="line">            outputMessage.getHeaders().setAcceptCharset(getAcceptedCharsets());</div><div class="line">        &#125;</div><div class="line">        Charset charset = getContentTypeCharset(outputMessage.getHeaders()</div><div class="line">                .getContentType());</div><div class="line">        FileCopyUtils.copy(s, new OutputStreamWriter(outputMessage.getBody(),</div><div class="line">                charset));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Return the list of supported &#123;@link Charset&#125;.</div><div class="line">     * &lt;p&gt;</div><div class="line">     * By default, returns &#123;@link Charset#availableCharsets()&#125;. Can be</div><div class="line">     * overridden in subclasses.</div><div class="line">     * </div><div class="line">     * @return the list of accepted charsets</div><div class="line">     */</div><div class="line">    protected List&lt;Charset&gt; getAcceptedCharsets() &#123;</div><div class="line">        return this.availableCharsets;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    private Charset getContentTypeCharset(MediaType contentType) &#123;</div><div class="line">        if (contentType != null &amp;&amp; contentType.getCharSet() != null) &#123;</div><div class="line">            return contentType.getCharSet();</div><div class="line">        &#125; else &#123;</div><div class="line">            return DEFAULT_CHARSET;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后在spring中配置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;mvc:annotation-driven&gt;</div><div class="line">       &lt;mvc:message-converters&gt;</div><div class="line">           &lt;bean class=&quot;cn.krun.cup.pojo.UTF8StringHttpMessageConverter&quot;&gt;</div><div class="line">               &lt;property name=&quot;writeAcceptCharset&quot; value=&quot;false&quot;&gt;</div><div class="line">               &lt;/property&gt;</div><div class="line">           &lt;/bean&gt;</div><div class="line">       &lt;/mvc:message-converters&gt;</div><div class="line">   &lt;/mvc:annotation-driven&gt;</div></pre></td></tr></table></figure>
<p>Done!</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2016/04/11/CentOS-6-5-kernel至3-10/">
                CentOS 6.5 kernel至3.10
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-04-11</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <ol>
<li><p>rpm –import <a href="https://www.elrepo.org/RPM-GPG-KEY-elrepo.org" target="_blank" rel="external">https://www.elrepo.org/RPM-GPG-KEY-elrepo.org</a></p>
</li>
<li><p>rpm -Uvh <a href="http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm" target="_blank" rel="external">http://www.elrepo.org/elrepo-release-6-6.el6.elrepo.noarch.rpm</a></p>
</li>
<li><p>yum –enablerepo=elrepo-kernel -y install kernel-lt</p>
</li>
<li><p>vi /etc/grub.conf  把对应3.10上的default由1改为0</p>
</li>
<li><p>reboot</p>
</li>
</ol>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2016/03/01/自定义Maven-Archetype来快速搭建自己的项目结构/">
                自定义Maven Archetype来快速搭建自己的项目结构
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-03-01</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <blockquote>
<p>自定义Maven Archetype主要是使用命令archetype:create-from-project来快速生成archetype</p>
</blockquote>
<h3 id="1-首先使用eclipse创建一个maven项目"><a href="#1-首先使用eclipse创建一个maven项目" class="headerlink" title="1.首先使用eclipse创建一个maven项目"></a>1.首先使用eclipse创建一个maven项目</h3><p>比如选择org.apache.maven.archetypes:maven-archetype-webapp为原型，然后添加groupId和artifactId信息后点finish创建项目。</p>
<h3 id="2-添加maven插件maven-archetype-plugin用来生成archetype，其他的依赖包可根据需要添加"><a href="#2-添加maven插件maven-archetype-plugin用来生成archetype，其他的依赖包可根据需要添加" class="headerlink" title="2.添加maven插件maven-archetype-plugin用来生成archetype，其他的依赖包可根据需要添加"></a>2.添加maven插件maven-archetype-plugin用来生成archetype，其他的依赖包可根据需要添加</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;</div><div class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line">    &lt;groupId&gt;com.melonlee.archetype&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;archetype-restful&lt;/artifactId&gt;</div><div class="line">    &lt;packaging&gt;war&lt;/packaging&gt;</div><div class="line">    &lt;version&gt;1.0&lt;/version&gt;</div><div class="line">    &lt;name&gt;archetype-restful Maven Webapp&lt;/name&gt;</div><div class="line">    &lt;url&gt;http://maven.apache.org&lt;/url&gt;</div><div class="line">    &lt;dependencies&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;junit&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;3.8.1&lt;/version&gt;</div><div class="line">            &lt;scope&gt;test&lt;/scope&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line"></div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;com.melonlee.voljin&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;VoljinFramework&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;</div><div class="line">            &lt;scope&gt;compile&lt;/scope&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">        </div><div class="line">    &lt;/dependencies&gt;</div><div class="line">    &lt;build&gt;</div><div class="line">        &lt;finalName&gt;archetype-restful&lt;/finalName&gt;</div><div class="line">        &lt;plugins&gt;</div><div class="line">            &lt;plugin&gt;</div><div class="line">                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;</div><div class="line">                &lt;artifactId&gt;maven-archetype-plugin&lt;/artifactId&gt;</div><div class="line">                &lt;version&gt;2.3&lt;/version&gt;</div><div class="line">            &lt;/plugin&gt;</div><div class="line">        &lt;/plugins&gt;</div><div class="line">    &lt;/build&gt;</div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure>
<h3 id="3-然后通过命令行进入到项目的根目录"><a href="#3-然后通过命令行进入到项目的根目录" class="headerlink" title="3.然后通过命令行进入到项目的根目录"></a>3.然后通过命令行进入到项目的根目录</h3><p>依次执行 :<br><code>mvn archetype:create-from-project</code><br><code>cd target/generated-sources/archetype;</code><br><code>mvn install</code>(将archetype安装到本地）<br><code>mvn archetype:crawl</code></p>
<h3 id="4-以后创建Maven项目时就可以选择使用自己定义的项目框架了"><a href="#4-以后创建Maven项目时就可以选择使用自己定义的项目框架了" class="headerlink" title="4.以后创建Maven项目时就可以选择使用自己定义的项目框架了"></a>4.以后创建Maven项目时就可以选择使用自己定义的项目框架了</h3>
        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2016/02/29/AES对Restful接口进行简单的数据校验之移动篇-iOS-Android/">
                AES对Restful接口进行简单的数据校验之移动篇(iOS&Android)
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-02-29</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>随着Restful的普及，越来越多的项目开始使用这种形式来进行接口的编写。Restful本身是无状态的，所以我们要对接口进行一些安全的校验，这可以从两个维度来考虑这个问题，1.防止接口数据被恶意重刷造成资源和数据的浪费 2.对用户进行权限校验来防止数据被恶心篡改</p>
<p>1.首先来说第一种情况: （主要是防止重放攻击）</p>
<p>关于重放攻击</p>
<p>对应项目中的一些数据接口，有一些是用户不需要登录，游客情况下就可以进行查看浏览的，这时候我们不需要进行用户权限信息的校验，只需要来过滤一些非法请求和无效请求即可；</p>
<p>实现思路 : 客户端(iOS*Android) 对请求的数据进行 paramters+timestamp+appkey=sign形式的AES加密，客户端与服务器端规定好密钥，服务器接收到数据后对数据进行解密，拿到时间戳后与当前时间戳进行比对，如果已经超出当前时间2分钟(可根据业务)则判定这次请求无效，不进行数据返回。</p>
<p>2.用户校验</p>
<p>这时调用的接口需要知道用户的状态才能进行调用，我们可以采用token的形式，就是经过用户身份认证之后服务端给客户端分配一个token,这时候调用接口时的sign就变成了 paramters+timestamp+appkey+token，而且服务器端可以对token进行灵活变动，比如每个token的使用次数是500次，超出后会重新下发新的token；或者对这个token的使用频次以及ip进行判定，这里可以根据业务需求来进行发挥。</p>
<p>今天所给出的方案都是最基础最简单的方案，可以满足比较简单，对安全性能要求不高的项目，后面我会慢慢增强校验的安全级别 :p</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2016/01/06/一些开源项目推荐/">
                一些开源项目推荐
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2016-01-06</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <h4 id="早上打开邮件就受到了开源中国的邮件，是一个目前互联网公司开源项目的导航页-http-www-oschina-net-company-去里面把所有的开源项目都大致看了下，找到了几个我比较感兴趣的，在这儿mark下。"><a href="#早上打开邮件就受到了开源中国的邮件，是一个目前互联网公司开源项目的导航页-http-www-oschina-net-company-去里面把所有的开源项目都大致看了下，找到了几个我比较感兴趣的，在这儿mark下。" class="headerlink" title="早上打开邮件就受到了开源中国的邮件，是一个目前互联网公司开源项目的导航页 http://www.oschina.net/company , 去里面把所有的开源项目都大致看了下，找到了几个我比较感兴趣的，在这儿mark下。"></a>早上打开邮件就受到了开源中国的邮件，是一个目前互联网公司开源项目的导航页 <a href="http://www.oschina.net/company" target="_blank" rel="external">http://www.oschina.net/company</a> , 去里面把所有的开源项目都大致看了下，找到了几个我比较感兴趣的，在这儿mark下。</h4><ol>
<li><p>阿里的就不用多说了，目前很多在用   <a href="https://github.com/alibaba" target="_blank" rel="external">https://github.com/alibaba</a></p>
</li>
<li><p>web开发框架 Xiaomi Rose   <a href="https://github.com/XiaoMi/rose" target="_blank" rel="external">https://github.com/XiaoMi/rose</a></p>
</li>
<li><p>Rose是面向使用Java开发的同仁们的。Rose 提供的各种特性和约束惯例，目的就是为了使您在能够轻松地开发web程序。如果您觉得Grails的想法很好，您不必转向它，Rose可以给您这种感觉，同时基于您对Java的熟悉，您又能更好地控制Rose。</p>
</li>
<li><p>pdf和mobi文档下载: <a href="https://github.com/XiaoMi/rose/tree/master/ebook" target="_blank" rel="external">https://github.com/XiaoMi/rose/tree/master/ebook</a></p>
</li>
<li><p>基于Promise的Node.js MVC框架 <a href="http://www.thinkjs.org/" target="_blank" rel="external">http://www.thinkjs.org/</a> </p>
</li>
<li><p>58同城的web框架 Argo  <a href="https://github.com/58code/Argo" target="_blank" rel="external">https://github.com/58code/Argo</a></p>
</li>
<li><p>Argo是开源的web框架，目前Argo支撑着58同城几乎所有的web站点，包括wap和手机端的访问等，现在wf每天处理10亿级的请求。经过长时间的运作与运行，证明Argo是一个可靠的、高效的web框架。</p>
</li>
<li><p>Argo在wf做了大量优化和重构，以适应各组织软件开发的个性化需求，提升了系统性能，具有更好的可扩展性。Argo的开源反过来也促进wf2.0的开发。</p>
</li>
<li><p>58同城数据库中间件 Oceanus  <a href="https://github.com/58code/Oceanus" target="_blank" rel="external">https://github.com/58code/Oceanus</a></p>
</li>
<li><p>机器学习引擎 Aerosolve   <a href="https://github.com/airbnb/aerosolve" target="_blank" rel="external">https://github.com/airbnb/aerosolve</a></p>
</li>
<li><p>Java 微服务框架 Microserver  <a href="http://www.oschina.net/p/microserver" target="_blank" rel="external">http://www.oschina.net/p/microserver</a></p>
</li>
<li><p>Microserver 是一个零配置、基于标准的身经百战的库，用来运行 Java REST 微服务，通过 Java 标准 main 类执行。从 2014 年开始就一直在 AOL 生产环境中使用。 </p>
</li>
<li><p>在线的 HTML5 游戏 BrowserQuest  <a href="http://browserquest.mozilla.org/" target="_blank" rel="external">http://browserquest.mozilla.org/</a></p>
</li>
<li><p>Inception —— 集审核、执行、备份及生成回滚语句于一身的MySQL自动化运维工具</p>
</li>
<li><p>分布式缓存服务器 memcachedb</p>
</li>
<li><p>memcachedb是 一个由新浪网的开发人员开放出来的开源项目，给memcached分布式缓存服务器添加了Berkeley DB的持久化存储机制和异步主辅复制机制，让memcached具备了事务恢复能力、持久化能力和分布式复制能力，非常适合于需要超高性能读写速度</p>
</li>
<li><p>专为微信设计的 UI 库 WeUI <a href="https://github.com/weui/weui" target="_blank" rel="external">https://github.com/weui/weui</a></p>
</li>
<li><p>Mac 的 UI 框架 TwUI   TwUI 是一个支持硬件加速的 Mac 的 UI 框架： 使用 CoreAnimation 实现的 GPU 加速 简单的 MVC 开发 与 UIKit 不同的地方</p>
</li>
<li><p>GIF 生成工具 Gifshot   Gifshot 是 JavaScript 库，可以从媒体流，视频或者图像中创建动态 GIF 图  <a href="https://github.com/yahoo/gifshot" target="_blank" rel="external">https://github.com/yahoo/gifshot</a></p>
</li>
</ol>
<p>—EOF—</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/12/23/Spring之JdbcTemplate进行查询的三种回调方式的比较/">
                Spring之JdbcTemplate进行查询的三种回调方式的比较
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-12-23</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>我们做过的很多项目中都会使用spring的JdbcTemplate进行结果集的查询操作，以前在使用的时候一直都是“拿来主义”，功能实现了就OK了，没有深究什么内容，特别是查询接口的回调内容方法，没有过多的研究过细节内容。最近一次使用JdbcTemplate进行查询操作，发现了一些有规律的内容，所以就深入学习了一下。和大家一起探讨一下：对于spring的JdbcTemplate进行结果集查询操作，spring给我们开发的是一系列的query方法，这些查询的方法中回调的接口主有三种：<code>ResultSetExtractor，RowCallbackHandler，RowMapper。</code></p>
<p>但是这三种回调接口具体的用法和区别，我们一起来看一下：</p>
<blockquote>
<p>场景设定，数据库中存在T_USER表，表中存在多条数据，需要将是表中数据映射到User对象上</p>
</blockquote>
<h3 id="1、org-springframework-jdbc-core-ResultSetExtractor"><a href="#1、org-springframework-jdbc-core-ResultSetExtractor" class="headerlink" title="1、org.springframework.jdbc.core.ResultSetExtractor"></a>1、org.springframework.jdbc.core.ResultSetExtractor</h3><p>ResultSetExtractor接口中定义的方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public interface ResultSetExtractor &#123;</div><div class="line">       Object extractData(ResultSet rs) throws SQLException, </div><div class="line">                                                DataAccessException;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p> 如果使用ResultSetExtractor接口作为回调方法，查询方式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">List&lt;User&gt; userList = (List&lt;User&gt;)jdbcDao.getJdbcTemplate().</div><div class="line">                                   query(&quot;select * from T_USER&quot;, new ResultSetExtractor() &#123;</div><div class="line">            @Override</div><div class="line">            public Object extractData(ResultSet rs) throws SQLException, </div><div class="line">                                                            DataAccessException &#123;</div><div class="line">                 List&lt;User&gt; userList = new ArrayList&lt;User&gt;();</div><div class="line">                 while (rs.next()) &#123;</div><div class="line">                    User user = new User();</div><div class="line">                    user.setId(rs.getInt(&quot;N_ID&quot;));</div><div class="line">                    user.setName(rs.getString(&quot;C_NAME&quot;));</div><div class="line">                    userList.add(user);</div><div class="line">                 &#125;</div><div class="line">                 return userList;</div><div class="line">            &#125;</div><div class="line">    &#125;);</div><div class="line"> </div><div class="line"></div><div class="line"></div><div class="line">``` </div><div class="line"></div><div class="line">###  2、org.springframework.jdbc.core.RowCallbackHandler</div><div class="line"></div><div class="line"> RowCallbackHandler接口中定义的方法如下：</div><div class="line"></div><div class="line"></div><div class="line">```     </div><div class="line">public interface RowCallbackHandler &#123;</div><div class="line">           void processRow(ResultSet rs) throws SQLException;</div><div class="line"></div><div class="line">     &#125;</div></pre></td></tr></table></figure>
<p> 如果使用RowCallbackHandler接口作为回调方法，查询方式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">final List&lt;User&gt; userList = new ArrayList&lt;User&gt;();</div><div class="line">  jdbcDao.getJdbcTemplate().query(&quot;select * from T_USER&quot;, </div><div class="line">                                                     new RowCallbackHandler()&#123;</div><div class="line">       @Override</div><div class="line">       public void processRow(ResultSet rs) throws SQLException &#123;</div><div class="line">           User user = new User();</div><div class="line">           user.setId(rs.getInt(&quot;N_ID&quot;));</div><div class="line">           user.setName(rs.getString(&quot;C_NAME&quot;));</div><div class="line">           userList.add(user);</div><div class="line">       &#125;</div><div class="line">   &#125;);</div></pre></td></tr></table></figure>
<h3 id="3、org-springframework-jdbc-core-RowMapper"><a href="#3、org-springframework-jdbc-core-RowMapper" class="headerlink" title="3、org.springframework.jdbc.core.RowMapper"></a>3、org.springframework.jdbc.core.RowMapper</h3><p>RowMapper接口中定义的方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public interface RowMapper &#123;</div><div class="line">        Object mapRow(ResultSet rs, int rowNum) throws SQLException; </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果使用RowMapper接口作为回调方法，查询方式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">List&lt;User&gt; userList = (List&lt;User&gt;)jdbcDao.getJdbcTemplate().</div><div class="line">query(&quot;select * from T_USER&quot;, new RowMapper()&#123;</div><div class="line">            @Override</div><div class="line">            public Object mapRow(ResultSet rs, int rowNumber) </div><div class="line">throws SQLException &#123;</div><div class="line">                User user = new User();</div><div class="line">                user.setId(rs.getInt(&quot;N_ID&quot;));</div><div class="line">                user.setName(rs.getString(&quot;C_NAME&quot;));</div><div class="line">                return user;</div><div class="line">            &#125;</div><div class="line">      &#125;);</div></pre></td></tr></table></figure>
<p>通过以上的例子我们可以看出，使用三种回调接口主要的区别是：</p>
<p>1、使用三种Callback接口作为参数的query方法的返回值不同:</p>
<p>以ResultSetExtractor作为方法参数的query方法返回Object型结果，要使用查询结果，我们需要对其进行强制转型；</p>
<p>以RowMapper接口作为方法参数的query方法直接返回List型的结果；</p>
<p>以RowCallbackHandler作为方法参数的query方法，返回值为void；</p>
<p>2、使用ResultSetExtractor作为Callback接口处理查询结果，我们需要自己声明集合类，自己遍历ResultSet，自己根据每行数据组装Customer对象，自己将组装后的Customer对象添加到集合类中，方法最终只负责将组装完成的集合返回。</p>
<h3 id="通过spring的文档描述我们可以知道："><a href="#通过spring的文档描述我们可以知道：" class="headerlink" title="通过spring的文档描述我们可以知道："></a>通过spring的文档描述我们可以知道：</h3><p>1、RowMapper应该就是一个精简版的ResultSetExtractor，RowMapper能够直接处理一条结果集内容，而ResultSetExtractor需要我们自己去ResultSet中去取结果集的内容，但是ResultSetExtractor拥有更多的控制权，在使用上可以更灵活；</p>
<p>2、与RowCallbackHandler相比，ResultSetExtractor是无状态的，他不能够用来处理有状态的资源。</p>
<blockquote>
<p>备注：在spring3中，这三个接口的内容也做出了修改，其中：ResultSetExtractor和RowMapper开始支持泛型，返回值的内容也是泛型中的对象，而RowCallbackHandler没有做出任何修改。</p>
</blockquote>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/09/29/Java获取照片信息-照片的照相机、时间等一系列数据/">
                Java获取照片信息(照片的照相机、时间等一系列数据)
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-09-29</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>首先介绍一下什么是EXIF，EXIF是 Exchangeable Image File的缩写，这是一种专门为数码相机照片设定的格式。这种格式可以用来记录数字照片的属性信息，例如相机的品牌及型号、相片的拍摄时间、拍摄时所设置的光圈大小、快门速度、ISO等等信息。除此之外它还能够记录拍摄数据，以及照片格式化方式，这样就可以输出到兼容EXIF格式的外设上，例如照片打印机等。</p>
<p>目前最常见的支持EXIF信息的图片格式是JPG，很多的图像工具都可以直接显示图片的EXIF信息，包括现在的一些著名的相册网站也提供页面用于显示照片的EXIF信息。本文主要介绍Java语言如何读取图像的EXIF信息，包括如何根据EXIF信息对图像进行调整以适合用户浏览。</p>
<p>目前最简单易用的EXIF信息处理的Java包是Drew Noakes写的metadata-extractor,Maven坐标如下:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.drewnoakes&lt;/groupId&gt;
    &lt;artifactId&gt;metadata-extractor&lt;/artifactId&gt;
    &lt;version&gt;2.8.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre><p>拍摄设备的型号便是EXIF信息中的其中一个。下面我们给出一段代码将这个图片的所有的EXIF信息全部打印出来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">package com.melonlee.api.utils;</div><div class="line"></div><div class="line">import java.io.File;</div><div class="line">import java.util.Iterator;</div><div class="line"></div><div class="line">import com.drew.imaging.jpeg.JpegMetadataReader;</div><div class="line">import com.drew.metadata.Directory;</div><div class="line">import com.drew.metadata.Metadata;</div><div class="line">import com.drew.metadata.Tag;</div><div class="line"></div><div class="line">public class TestImg &#123;</div><div class="line"></div><div class="line">    public static void main(String[] args) throws Exception &#123;</div><div class="line">        File jpegFile = new File(&quot;/Users/Melon/Downloads/xiaomian.jpg&quot;);</div><div class="line">        Metadata metadata = JpegMetadataReader.readMetadata(jpegFile);</div><div class="line"></div><div class="line">        Iterable&lt;Directory&gt; dis = metadata.getDirectories();</div><div class="line"></div><div class="line">        for (Directory directory : metadata.getDirectories()) &#123;</div><div class="line">            for (Tag tag : directory.getTags()) &#123;</div><div class="line">                System.out.println(tag);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        // Iterator tags = (Iterator) metadata.getDirectories();</div><div class="line">        while (dis.iterator().hasNext()) &#123;</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>打印信息:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">[JFIF] Version - 1.1</div><div class="line"></div><div class="line">[JFIF] Resolution Units - none</div><div class="line"></div><div class="line">[JFIF] X Resolution - 1 dot</div><div class="line"></div><div class="line">[JFIF] Y Resolution - 1 dot</div><div class="line"></div><div class="line">[JpegComment] JPEG Comment - CREATOR: gd-jpeg v1.0 (using IJG JPEG v62), quality = 95</div><div class="line"></div><div class="line"> </div><div class="line"></div><div class="line">[JPEG] Compression Type - Baseline</div><div class="line"></div><div class="line">[JPEG] Data Precision - 8 bits</div><div class="line"></div><div class="line">[JPEG] Image Height - 1080 pixels</div><div class="line"></div><div class="line">[JPEG] Image Width - 1920 pixels</div><div class="line"></div><div class="line">[JPEG] Number of Components - 3</div><div class="line"></div><div class="line">[JPEG] Component 1 - Y component: Quantization table 0, Sampling factors 2 horiz/2 vert</div><div class="line"></div><div class="line">[JPEG] Component 2 - Cb component: Quantization table 1, Sampling factors 1 horiz/1 vert</div><div class="line"></div><div class="line">[JPEG] Component 3 - Cr component: Quantization table 1, Sampling factors 1 horiz/1 vert</div><div class="line"></div><div class="line">[File] File Name - 1.jpg</div><div class="line"></div><div class="line">[File] File Size - 871759 bytes</div><div class="line"></div><div class="line">[File] File Modified Date - Tue Oct 20 14:49:50 CST 2015</div></pre></td></tr></table></figure>
<p>–EOF–</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/09/20/Error-java-Compilation-failed-internal-java-compiler-error/">
                IDEA-Error-java- Compilation failed-internal java compiler error
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-09-20</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>编译时问题如下:</p>
<p><img src="http://ww4.sinaimg.cn/mw690/775c483fjw1f05ygngog7j20le045ab9.jpg" alt=""></p>
<p>明显是版本问题，按照如下更改即可：</p>
<p><img src="http://ww2.sinaimg.cn/mw690/775c483fjw1f05yitqtlgj210y0ltgpj.jpg" alt=""></p>
<p>–EOF–</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/08/18/Spring-Boot初探/">
                Spring Boot Hello World!
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-08-18</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>在一些开源项目的介绍上看到过很多次的spring boot字眼，可一直没具体去看过，今天先简单上手跑通一下流程 :p</p>
<p>回首我们以前使用Spring框架的时候，我们需要首先在（如果你使用Maven的话）pom文件中增加对相关的的依赖（使用gradle来构建的话基本也一样）然后新建Spring相关的xml文件，而且往往那些xml文件还不会少。然后继续使用tomcat或者jetty作为容器来运行这个工程。基本上每次创建一个新的项目都是这么一个流程，而我们有时候仅仅想快速的创建一个Spring web工程来测试一些东西，或者是希望能节省时间。</p>
<p>现在我们使用Spring Boot就可以快速的做到这些了。 </p>
<h4 id="1-创建一个Maven工程，然后我们在pom-xml文件中加入依赖："><a href="#1-创建一个Maven工程，然后我们在pom-xml文件中加入依赖：" class="headerlink" title="1.创建一个Maven工程，然后我们在pom.xml文件中加入依赖："></a>1.创建一个Maven工程，然后我们在pom.xml文件中加入依赖：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.0.2.RELEASE&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
<h4 id="2-写一个controller来处理请求"><a href="#2-写一个controller来处理请求" class="headerlink" title="2.写一个controller来处理请求:"></a>2.写一个controller来处理请求:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">package springboot.wiki.melon.springboottest;</div><div class="line"></div><div class="line">import org.springframework.boot.SpringApplication;</div><div class="line">import org.springframework.boot.autoconfigure.EnableAutoConfiguration;</div><div class="line">import org.springframework.stereotype.Controller;</div><div class="line">import org.springframework.web.bind.annotation.RequestMapping;</div><div class="line">import org.springframework.web.bind.annotation.RequestMethod;</div><div class="line">import org.springframework.web.bind.annotation.ResponseBody;</div><div class="line"></div><div class="line">@Controller</div><div class="line">@EnableAutoConfiguration</div><div class="line">public class FirstController &#123;</div><div class="line"></div><div class="line">    @ResponseBody</div><div class="line">    @RequestMapping(value = &quot;hello&quot;, method = &#123; RequestMethod.POST,</div><div class="line">            RequestMethod.GET &#125;)</div><div class="line">    public String hello() &#123;</div><div class="line"></div><div class="line">        return &quot;Hello Melon! Hello spring boot !&quot;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        SpringApplication.run(FirstController.class, args);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"> </div><div class="line"></div><div class="line"></div><div class="line">``` </div><div class="line"></div><div class="line">#### 3.Run! 然后访问 localhost:8080/hello，就能看到controller返回的内容了， 这个过程是不是非常快速简单 :p</div><div class="line"></div><div class="line">```  .   ____          _            __ _ _</div><div class="line"></div><div class="line"> /\\ / ___&apos;_ __ _ _(_)_ __  __ _ \ \ \ \</div><div class="line"></div><div class="line">( ( )\___ | &apos;_ | &apos;_| | &apos;_ \/ _` | \ \ \ \</div><div class="line"></div><div class="line"> \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</div><div class="line"></div><div class="line">  &apos;  |____| .__|_| |_|_| |_\__, | / / / /</div><div class="line"></div><div class="line"> =========|_|==============|___/=/_/_/_/</div><div class="line"></div><div class="line"> :: Spring Boot ::        (v1.0.2.RELEASE)</div></pre></td></tr></table></figure>
<p>–EOF–</p>

        </div>
    

</div>
            
                
<div class="post">

    <div class="post-header index">
        <h1 class="title">
            <a href="/2015/08/09/使用SfntTool对字体文件瘦身/">
                使用SfntTool对字体文件瘦身
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2015-08-09</span>
            
            
            
        </div>
    </div>

    
        <div class="content">
            <p>在做移动端的H5页面时经常遇到一些特殊字体，往往动辄就4-5M，大的有的20多M，这文件要是扔到web上肯定就直接歇菜了。所以这时候就得想下怎么对字体文件瘦身呢?无外乎是对字体文件中没有用到的字体进行剔除，一个字体文件中少说也有3500个字根，我们一个页面用到的也就100-200字最多了，所以有很多冗余的字根我们可以去掉。</p>
<p>前端全的webfont有一些解决方案，大家可自行查找，(字蛛)。大多数都是通过node来进行编译静态的html文件，然后分析文件中的包含文字然后生成对应的压缩剔除后的字体文件供前端页面导入，但这里有很大弊端就是不支持动态文件页面的字体剔除，如果是做一些简单的H5页面或者邀请函之类，上面的需求就完全够用了，但往往有一些动态文件的页面也是需要我们来进行用特殊字体渲染的，这就是本文所要解决的。</p>
<blockquote>
<p>SfntTool 官网地址是：<a href="https://code.google.com/p/sfntly/" target="_blank" rel="external">https://code.google.com/p/sfntly/</a>  可用于编辑、创建和使用字体文件的，主要针对OpenType, TrueType字体。</p>
</blockquote>
<p>各个JDK版本下的SfntTool  jar包 <a href="https://github.com/reedy/sfntly-builds/" target="_blank" rel="external">https://github.com/reedy/sfntly-builds/</a> ,可以直接使用编译好的jar包来进行操作 </p>
<p><code>java -jar YOUR_LIB_PATH/sfnttool.jar -s &#39;汉体书写&#39; YOUR_FONT_PATH/字体.TTF 字体-light.TTF</code></p>
<p>也可以导入到项目中使用具体代码来进行动态操作:（推荐）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * </div><div class="line"> * 字体提取工具类</div><div class="line"> * </div><div class="line"> * @author Melon</div><div class="line"> * </div><div class="line"> */</div><div class="line">public class FontGenerateManager &#123;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * </div><div class="line">     * 根据舒服的内容生成字体文件</div><div class="line">     * </div><div class="line">     * @param content</div><div class="line">     * @param sourceFontFile</div><div class="line">     * @param generateFontFile</div><div class="line">     * @return</div><div class="line">     */</div><div class="line">    public static void generateFontByContent(String content,</div><div class="line">            String sourceFontFile, String generateFontFile) &#123;</div><div class="line"></div><div class="line">        String[] args2 = new String[] &#123; &quot;-s&quot;, content, sourceFontFile,</div><div class="line">                generateFontFile &#125;;</div><div class="line">        try &#123;</div><div class="line"></div><div class="line">            SfntTool.main(args2);</div><div class="line"></div><div class="line">        &#125; catch (IOException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>做了一个简单的基于SfntTool在线字体瘦身小工具  <a href="http://sonnyfont.k-run.cn" target="_blank" rel="external">http://sonnyfont.k-run.cn</a> </p>
<p>–EOF–</p>

        </div>
    

</div>
            
        </section>
    </div>
</div>



    <div class="row">
        <div class="col-sm-12">
            <div class="wrap-pagination">
                <a class="" href="/">
                    <i class="fa fa-chevron-left" aria-hidden="true"></i>
                </a>
                <a class="" href="/page/3/">
                    <i class="fa fa-chevron-right" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>




</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    This theme was developed by <a href="https://github.com/klugjo">Jonathan Klughertz</a>. The source code is available on Github. Create Websites. Make Magic.
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2017/01/08/idea创建maven项目速度慢/">idea创建maven项目速度慢</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/06/Day5-异常-异常处理、原子性/">Day5-{9.异常}-异常处理、原子性</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/04/Day4-9-异常-Part1/">Day4-{9.异常}-异常的使用场景、异常的种类</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2017/01/03/Day3-通用程序设计-字符串使用性能、接口引用对象、反射、JNI、优化、命名规范/">Day3-{8.通用程序设计}-字符串使用性能、接</a>
            </li>
            
        </ul>
    </div>



            
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a href="https://github.com/klugjo/hexo-theme-alpha-dust">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://twitter.com/?lang=en">
                            <span class="footer-icon-container">
                                <i class="fa fa-twitter"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.facebook.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-facebook"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.instagram.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-instagram"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://dribbble.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-dribbble"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://plus.google.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-google-plus"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://www.behance.net/">
                            <span class="footer-icon-container">
                                <i class="fa fa-behance"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="https://500px.com/">
                            <span class="footer-icon-container">
                                <i class="fa fa-500px"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:test@example.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li class="list-inline-item">
                        <a href="\#">
                            <span class="footer-icon-container">
                                <i class="fa fa-rss"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->
<script src="/js/main.js"></script>

<!-- Disqus Comments -->



</body>

</html>